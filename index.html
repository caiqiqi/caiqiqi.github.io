<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="陛下，您真是一位老太太">
<meta property="og:type" content="website">
<meta property="og:title" content="蔡奇奇的博客">
<meta property="og:url" content="https://github.com/caiqiqi/index.html">
<meta property="og:site_name" content="蔡奇奇的博客">
<meta property="og:description" content="陛下，您真是一位老太太">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="蔡奇奇的博客">
<meta name="twitter:description" content="陛下，您真是一位老太太">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="https://github.com/caiqiqi/"/>

  <title> 蔡奇奇的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="564933437@qq.com">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">蔡奇奇的博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/hello-world/" itemprop="url">
                  Hello World
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T04:23:21+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/《大明王朝的七张面孔》——海瑞/" itemprop="url">
                  《大明王朝的七张面孔》——海瑞
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:51:15+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>海瑞篇<br><img src="http://img.blog.csdn.net/20160215173346980" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20160215173234854" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20160215173217283" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20160215173149673" alt="这里写图片描述"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/逆向初体验之玩“英语趣配音”/" itemprop="url">
                  逆向初体验之玩“英语趣配音” 
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:33:08+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p></p><p>前天看到空间里有人在玩给视频里的人说的话配音。有两种，一种其实就是卡拉OK的形式，把话筒交给你；另一种是给电影里的人物配音，就是说台词。想想近期有给你一段音频要你自己表演对口型的，还有给你视频要你自己配音的。 我也玩了一下，录完之后分享到微信朋友圈，结果我点击分享按钮之后，这软件提示我“发送取消”。我心想我明明点的“发送”啊，怎么就成“取消”了。好行，取消就取消吧，我就再发送一次，结果还是“发送取消”，反正前后总共云雨了三次之后，我放弃了，然后就去吃饭了。结果回来一看，咦，怎么朋友圈里这么多条响应？</p><br><img src="https://camo.githubusercontent.com/01a6ab2f8d63114147c9173e32c9e84d8e12c20d/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f312e706e67" alt=""><br>然后我把自己的朋友圈的“相册”打开发现已经发布了三条，由于后来又被我删除了，这里只剩下两条。<br><br><img src="https://camo.githubusercontent.com/e02c8a1d1ad58e42c32e23cb064c328aa54e39b2/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f322e706e67" alt=""><br>我寻思原来您玩延迟呢！ 然后我就想看看里面代码到底怎么写的。话说上次玩“唱吧”也是的，第一次玩就发现一个bug，就是当你打开一个你之前已经打开过的曲目时，而且是同一个版本的话，即，该版本的缓存已经在你本地了，比如我打开上次唱过的“Lose yourself”，因为这首歌有几个版本，去确认了是刚才打开的那个版本之后，当我再点击那个曲目时，就进不去了，而打开其他任何我没打开过的曲目都挺好的。。。后来我反馈给了“唱吧”新版本解决没有。PS：这么简单的一个bug也没发现。。。（难道因为众ROM难调，是我机型问题？） 好，闲话不多扯，看看里面代码到底怎么搞的。首先当然是先在手机里观察，这里应用的底部有四个标签页（TabHost）：“配音”“小组”“榜单”“我”。<br><br><img src="https://camo.githubusercontent.com/2433f9b517d803aac4a6e5ffe78c804e4a126376/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f332e706e67" alt=""><p></p>
<p>然后audio,group,rank,me…几个单词就出现在我脑海里，在猜想他会怎么命名呢？好，首先当然是打开配置文件（<code>AndroidManifest.xml</code>）咯。搜索<code>android.intent.action.MAIN</code> <code>android.intent.category.LAUNCHER</code>的“活动”（Activity）。好找到了，<code>com.ishowedu.peiyin.login.SplashActivity</code>嗯，这里不是一个主界面，应该是一个欢迎界面。好像一般都这个路数哈，先是一张欢迎的图，然后如果没有账号在本地登录过，即本地没有你的<code>SharedPreference</code>的话，就进入登录界面；如果你已经登录过了，那么直接进入主界面。打开这个Activity，注意到这个Activity没有直接继承Activity类，而是<br><br><img src="https://camo.githubusercontent.com/20a1d5057e95c22f87ae4aafe0e1a3defc773078/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f342e706e67" alt=""><br>好了，先不去研究BaseActivity2是个什么玩意，先搜索<code>onCreate()</code>吧，结果居然没有，啊，我还是太年轻，原来您不重写这个啊？行，那就搜<code>startActivity()</code>吧，您总得跳转的吧。搜到一个叫onLoadFinished()的一个方法，可能是BaseActivity2的吧，啊，不管了，好，找到线索了。<br><br><img src="https://camo.githubusercontent.com/f4a40381f6652fe988a36f5be7c0087d5bc30aea/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f352e706e67" alt=""><br>看到经过判断后，它会跳转到MainActivity。然后再搜MainActivity的<code>onCreate()</code>方法，这次总算有了吧<br><br><img src="https://camo.githubusercontent.com/2ba346a1bc60eee7afc105f5828bfa3633c53546/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f362e706e67" alt=""><br>看到一个init()，看下面也没有重要的点了，关键应该在init()里面。结过看了init()之后，发现我想错了，我看init()干嘛，我现在底下有四个TabHost，我应该找TabHost啊！于是搜索TabHost之后发现了这个<br><br><img src="https://camo.githubusercontent.com/668f24fe8c62f7cf869112f7453a9b899c0c9e9e/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f372e706e67" alt="">哈哈，这不就是了，home,group,rank/show,me这些东西。将GroupHomeWrapperFragment与“小组”选项卡配对，RankFragment2与“榜单”配对，MeSpaceFragment与“我”选项卡配对之后，就只剩下HomeFragment了，好吧，那只能是你了。所以我目前所在的“配音”选项卡应该是HomeFragment。我要找到我的地盘，然后打开我先前配的音当然要到MeSpaceFragment里面去看啊。<br><br><img src="https://camo.githubusercontent.com/ff8f60d10de897069fe4e75ca6166093a4a0a8bc/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f382e706e67" alt=""><br>看到这个页面有很多选项，可能是Button或者什么View之类的。看看全局变量吧，找到很多<code>TextView</code><br><br><img src="https://camo.githubusercontent.com/bb6643157036f2adfb4630bf8a52298ce0ddf459/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f392e706e67" alt=""></p>
<p>想到这个界面里的各种词“粉丝”“访客”“相册”什么的，然后什么fans,visitor,album,friend之类的东西就出来了，看看变量名，恩，应该就是你们这几个家伙了。然后我发现到现在为止我已经看到好多次dubbing这个词了，这词啥意思啊，没见过。查了查，哦，原来是“配音”的意思。那“我的配音”这个按钮应该对应tvMydub这个了。那就该去找点击之后会发生什么啊，于是找<code>onClick()</code>。在onClick()中有很多case，对应着这个界面中的各个View控件，再找<code>startActivity()</code>。好像没有什么信息需要返回的，应该不是<code>startActivityForResults()</code>。在众多的startActivity()中找吧。<br><br><img src="https://camo.githubusercontent.com/7214aab6301502096e20c19333fb60378a8a1462/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31302e706e67" alt=""><br>看到一个DubbingListActivity，这个应该是表示“配音列表”吧。但是startActivity()中的参数怎么不是直接指定的Intent呢？猜想createIntent()应该是返回一个Intent，去里面瞄了瞄，恩，是的，好，这我就放心了，然后就进入了DubbingListActivity，这时候我们就来到这里了<br><br><img src="https://camo.githubusercontent.com/b91f4b759cc3e754895c21ace1a0ff633a15bcb9/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31312e706e67" alt=""><br>捣鼓了半天，在它的<code>onCreate()</code>中发现这两个方法initActionBar()和initFragment()<br><br><img src="https://camo.githubusercontent.com/a2684b4ee7a2ecf6d92258c4608431dfa1581cfb/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31322e706e67" alt=""><br>经过验证发现，应该上面是ActionBar，下面是Fragment。然后就找onClick()，找了半天发现没找对地方，后面想了想，这活应该交给它的Fragment，于是在initFragment()中找到了对应的DubbingListFragment。又是一番好找（第一次玩，没经验啊），在DubbingListFragment中找到了两个响应点击事件的监听器（在那个有视频截图的图片上长按，发现有响应的对话框出现，对应的，猜想应该有一个对长按响应的监听器）。<br><br><img src="https://camo.githubusercontent.com/1e1aa5fccc5e5d49f2b1b6ba47d9e2af35e02a24/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31332d312e706e67" alt=""><br><img src="https://camo.githubusercontent.com/228e02d32f560956c63b5029cb4b78239d95643a/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31332d322e706e67" alt=""><br>长按的就不看了吧，看OnItemClickListener这个的onItemClick()吧，找到关键代码<br><br><img src="https://camo.githubusercontent.com/7b25d165c8cd61b91024619d8639ec22480d6324/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31342e706e67" alt=""><br>发现一个新的HotRankInfoActivity。看名字不像是这个界面的感觉啊<br><br><img src="https://camo.githubusercontent.com/c005c191f25bc18173f701aad8c7d2afbfe17dcf/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31352e706e67" alt=""></p>
<p>就因为这个名字，没有想通，在别的地方又找了好久（所以还是没经验啊）。最后还是根据在这个界面中点击“评论”和“分享”按钮时，系统弹出的Toast“当前为本地视频，请上传后重试”这个线索，发现还只能是这里了。//当然，同时我也因此找到了与“评论”和“分享”按钮相关的代码区域。好了，再来，再找它的<code>onCreate()</code><br><br><img src="https://camo.githubusercontent.com/0e98dbad91182efb701ef648c5b558b6152538b7/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31362e706e67" alt=""><br>再看initFragment()这个方法<br><br><img src="https://camo.githubusercontent.com/9f7831d79a95ba8ab15cdd851384858539bbc0db/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31372e706e67" alt=""><br>（先前对Fragment不怎么熟，临时抱佛脚，查了下官方文档才知道怎么用的。）于是，我们又要跳到HotRankInfoFragment里去瞧一瞧了。照例，还是在onClick()中找，发现switch里有几个case，应该是对应的“评论”“我要配音”“分享”这几个按钮。<br><br><img src="https://camo.githubusercontent.com/4fa086b00c02369debd02b21222ec7866fd1a59b/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31382e706e67" alt=""><br>看到698行，“分享”按钮下面，又是对操作者是否是本地用户进行了判断。最后关键的是707行（开始以为709行会干什么重要的事咯，后来发现原来只是给新打开的Activity加一些特效），将各种乱七八糟的参数传给Intent后，进入到ShareActivity，也就是这个界面：<br><br><img src="https://camo.githubusercontent.com/5a0f9bbcaaec30dc2f5312df304a8f31dc29e1ee/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f31392e706e67" alt=""><br>在ShareActivity中，又是通过对onClick()的查看发现了各个case<br><br><img src="https://camo.githubusercontent.com/ed9649bc41f85ae35929f9844fced9a577ef1597/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f32302e706e67" alt=""><br>发现对分享到“微信好友”和“微信朋友圈”有一条两者都需要走的路。<br><br><img src="https://camo.githubusercontent.com/c5b81ea27227bd7e1f434ebf193586c1033ca1df/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f32312e706e67" alt=""><br>都是先检测“微信”的版本，确认该版本可以分享之后，再通过对weChatShare()传递不同的参数，以区分“发送给微信好友”还是“分享到朋友圈”这两种情况。在weChatShare()中，通过调用腾讯的微信SDK中的API，将这个“配音”的各种信息（视频的url，封面图片，描述语等）交给微信的Activity来完成。<br><br><img src="https://camo.githubusercontent.com/396b06dd4f43560487cd4ff26d15102200c36f11/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f32322e706e67" alt=""></p>
<p>最后，我想不通的是我点击了“发送”按钮之后，这个应用给我的提示居然是莫名其妙的“发送取消”<br><br><img src="https://camo.githubusercontent.com/b8f72218bf0d488c368135c795b6971c41391c6c/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f32332e706e67" alt=""><br>我通过“发送取消”这个字符串找了半天也没找到是在哪里出现的。。。最后我在smali目录下搜索所有文件中是否有包含“0x7f0d0099”的字符串出现，结果开始很让人兴奋<br><br><img src="https://camo.githubusercontent.com/9f128897074853be5d0f44412f114b4e1e85e5f6/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f32342e706e67" alt=""><br>但后来发现它出现在微信的API中的一个回调方法<code>onResp(BaseReq paramBaseReq)</code>中，至于怎么微信是怎么处理“发送”按钮的，我就不得而知了。所以我们的探索到这里也只能结束了。最后总结一下，第一次玩逆向，太年轻，走了很多弯路，其实应该直接adb连接手机，在DDMS里面直接观察就可以发现当前处在哪个Activity，调用了哪个方法。最后顺便瞄了一下DDMS，突然有个”xiaomi”的Tag，我好奇，我寻思这谁啊？我又没用小米的手机，怎么又这个东西，后来找到原来是bilibili的pushservice…<br><br><img src="https://camo.githubusercontent.com/8e3df82576d5fab1c7d75d4ee3c9313fd4a72644/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f32352e706e67" alt=""></p>
<p>一怒之下，将其禁用。随后又想起各种无聊的推送消息，一一禁用。<br><br><img src="https://camo.githubusercontent.com/b74cac43c7fffc7d66cd2ebaa30179c0dcbdb689/687474703a2f2f7261772e6769746875622e636f6d2f636169716971692f6970656979696e2f6d61737465722f696d672f32362e706e67" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/Python验证码图像识别/" itemprop="url">
                  Python验证码图像识别
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:31:41+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天又到了我们学校一年一度的选课时间，然后又到了特别想写一个自动登录的东西，但是关键在于验证码如何识别。今天跟老师交流了一下，老师要我可以跟一个大神交流。大神说什么语言都可以实现这个，网上有很多这种可以识别验证码的程序，然后我搜了一下，搜到这个项目。<br>看到<a href="https://github.com/JoveYu/code-identify/blob/master/code.py">这个项目</a>里面，用到了一句：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div></pre></td></tr></table></figure></p>
<p>于是我搜索<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install PIL</div></pre></td></tr></table></figure></p>
<p>提示没有安装<code>pip</code><br>于是我先得安装pip。<br>直接<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">easy_install pip</div></pre></td></tr></table></figure></p>
<p>提示没有权限。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo easy_install pip</div></pre></td></tr></table></figure></p>
<p>之后，成功安装pip。<br><img src="http://img.blog.csdn.net/20160307205545588" alt="这里写图片描述"><br>然后就可以用批判来安装python模块了。<br>然后我以为那个<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</div></pre></td></tr></table></figure></p>
<p>的模块名叫PIL，于是我<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install PIL</div></pre></td></tr></table></figure></p>
<p>结果不行，然后看到<img src="https://pypi.python.org/pypi/Pillow/2.1.0" alt="这里">告诉我应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install Pillow</div></pre></td></tr></table></figure></p>
<p>然而还是出现问题，<strong>权限问题！</strong><br><img src="http://img.blog.csdn.net/20160307210353588" alt="这里写图片描述"><br>于是我<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install Pillow</div></pre></td></tr></table></figure></p>
<p>就成功了。<br>待续。。。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/Unix-Linux移动某目录下匹配规则文件至另一目录/" itemprop="url">
                  Unix/Linux移动某目录下匹配规则文件至另一目录
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:30:14+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>以前一直苦于不知道怎么将某目录下像<code>IMG_2016.....ipg</code>这类文件移动到其他目录，今天试了一下，原来这样就可以，没那么麻烦。<br><img src="http://img.blog.csdn.net/20160307211919313" alt="这里写图片描述"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv IMG_2016* ./DCIM/</div></pre></td></tr></table></figure></p>
<p>就行了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/OSX从系统自带python改为Homebrew版python/" itemprop="url">
                   OSX从系统自带python改为Homebrew版python
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:28:36+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># 将Homebrew版python将要放的路径加入到环境变量</div><div class="line">export PATH =/usr/local/bin:$PATH</div><div class="line"># 使修改后的环境变量生效</div><div class="line">source ~/.bash_profile</div><div class="line"># 再判断一下当前的python是哪个python</div><div class="line">which python</div><div class="line"># 如果显示的是/usr/local/bin/python(Homebrew版)而不是/usr/bin/python(系统自带)，则算成功</div></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20160308225443445" alt="这里写图片描述"></p>
<p>之前用系统自带python时，<br><img src="http://img.blog.csdn.net/20160308231835892" alt="这里写图片描述"><br>当安装好Homebrew版的python之后，<br><img src="http://img.blog.csdn.net/20160308232007846" alt="这里写图片描述"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/使用Python从jsp或者aspx这种动态页面获取图片并保存到本地/" itemprop="url">
                  使用Python从jsp或者aspx这种动态页面获取图片并保存到本地
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:27:14+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有些登录页面中的验证码图片是从这样的动态页面url：<br><br><a href="http://cer.nju.edu.cn/amserver/verify/image.jsp" target="_blank" rel="external">http://cer.nju.edu.cn/amserver/verify/image.jsp</a><br><br><a href="http://gs.cqupt.edu.cn:8080/Public/ValidateCode.aspx" target="_blank" rel="external">http://gs.cqupt.edu.cn:8080/Public/ValidateCode.aspx</a> <br><br>中获取的。这时不能这样：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_img_from_url</span><span class="params">(imageUrl, filename)</span>:</span></div><div class="line">	u = urllib2.urlopen(imageUrl)</div><div class="line">	data = u.read()</div><div class="line">	f = open(filename, <span class="string">'wb'</span>)</div><div class="line">	f.write(data)</div><div class="line">	f.close()</div></pre></td></tr></table></figure></p>
<p>因为得到的是一个html页面，查看其源代码如下：<br><img src="http://img.blog.csdn.net/20160311194509843" alt="这里写图片描述"><br>而应该用：<br>哦不是，上面那样可以。。。。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/译-Android开发规范与架构/" itemprop="url">
                  [译]Android开发规范与架构
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:25:29+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><ul>
<li>使用Gradle和它推荐的工程目录</li>
<li>使用 Maven依赖而不是导入jar包</li>
<li>把密码和敏感数据放在<code>gradle.properties</code></li>
<li>使用<code>Fragment</code>来呈现UI视图</li>
<li>使用<code>Activity</code>只是用来管理<code>Fragment</code>的</li>
<li>使用多个<code>style</code>文件以避免单一的大style文件</li>
<li>使用<code>WebView</code>时避免在客户端做处理HTML工作，当心内存泄露</li>
<li>总是用ProGuard和DexGuard来混淆项目</li>
<li>不要自己写HTTP客户端，使用Volley或者OKHttp库</li>
</ul>
<h2 id="Android-SDK存放路径"><a href="#Android-SDK存放路径" class="headerlink" title="Android SDK存放路径"></a>Android SDK存放路径</h2><p>将你的Android SDK放在你的home目录或其他应用程序无关的位置。当安装有些包含SDK的IDE的时候，可能会将SDK放在IDE同一目录下，当你需要升级（或重新安装）IDE或更换的IDE时，会非常麻烦。</p>
<h2 id="构建系统"><a href="#构建系统" class="headerlink" title="构建系统"></a>构建系统</h2><p>你的默认编译环境应该是Gradle。因为Ant 有很多限制，也很冗余。<a href="http://tools.android.com/tech-docs/new-build-system/user-guide" target="_blank" rel="external">使用Gradle</a>，<strong>管理和下载依赖很方便</strong>。</p>
<h2 id="工程结构"><a href="#工程结构" class="headerlink" title="工程结构"></a>工程结构</h2><p>不要用老的<code>Ant&amp; Eclipse ADT</code>工程结构：<br>├─ assets<br>├─ libs<br>├─ res<br>├─ src<br>│  └─ com/futurice/project<br>├─ AndroidManifest.xml<br>├─ build.gradle<br>├─ project.properties<br>└─ proguard-rules.pro</p>
<p>而用新的<code>Gradle&amp; Android Studio</code>工程结构：<br>├─ library-foobar<br>├─ app<br>│  ├─ libs<br>│  ├─ src<br>│  │  ├─ androidTest<br>│  │  │  └─ java<br>│  │  │     └─ com/futurice/project<br>│  │  └─ main<br>│  │     ├─ java<br>│  │     │  └─ com/futurice/project<br>│  │     ├─ res<br>│  │     └─ AndroidManifest.xml<br>│  ├─ build.gradle<br>│  └─ proguard-rules.pro<br>├─ build.gradle<br>└─ settings.gradle</p>
<p>你的项目引用第三方项目库时（例如，library-foobar），拥有一个顶级包名app从第三方库项目区分你的应用程序是非常有用的。</p>
<p>下载jar包，然后更新它们是很繁琐的，这个问题Maven很好的解决了，这在Android Gradle构建中也是推荐的方法。你可以指定版本的一个范围，如2.1.+,然后Maven会自动升级到制定的最新版本，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">    compile &apos;com.netflix.rxjava:rxjava-core:0.19.+&apos;</div><div class="line">    compile &apos;com.netflix.rxjava:rxjava-android:0.19.+&apos;</div><div class="line">    compile &apos;com.fasterxml.jackson.core:jackson-databind:2.4.+&apos;</div><div class="line">    compile &apos;com.fasterxml.jackson.core:jackson-core:2.4.+&apos;</div><div class="line">    compile &apos;com.fasterxml.jackson.core:jackson-annotations:2.4.+&apos;</div><div class="line">    compile &apos;com.squareup.okhttp:okhttp:2.0.+&apos;</div><div class="line">    compile &apos;com.squareup.okhttp:okhttp-urlconnection:2.0.+&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Activities与Fragments"><a href="#Activities与Fragments" class="headerlink" title="Activities与Fragments"></a>Activities与Fragments</h2><p>Fragments应该作为你实现UI界面默认选择。你可以重复使用Fragments来组合成你的应用。我们强烈推荐使用Fragments而不是Activity来呈现UI界面，理由如下：</p>
<ul>
<li><strong>屏幕间数据通信</strong>  从一个Activity发送复杂数据(例如Java对象)到另外一个Activity时，Android的API并没有提供合适的方法。不过使用Fragment，你可以使用一个Activity实例作为这个Activity的子Fragments之间的通信通道。这样比Activity与Activity间的通信好。</li>
<li><strong>提供多窗格布局解决方案</strong>  Fragments 的引入主要是为了将手机应用延伸到平板电脑，所以在平板电脑上你可能有A、B两个窗格，但是在手机应用上A、B可能分别充满整个屏幕。如果你的应用在最初就使用了Fragments，那么以后将你的应用适配到其他不同尺寸屏幕就会非常简单。</li>
<li>Fragments 一般通用的不只有UI 你可以有一个没有界面的fragment作为Activity提供后台工作。进一步你可以使用这个特性来创建一个<a href="http://stackoverflow.com/questions/12363790/how-many-activities-vs-fragments/12528434#12528434" target="_blank" rel="external">fragment 包含改变其它fragment的逻辑</a>，而不是把这个逻辑放在Activity中。</li>
</ul>
<h2 id="Java-包结构"><a href="#Java-包结构" class="headerlink" title="Java 包结构"></a>Java 包结构</h2><p>Android 应用程序在架构上大致是Java中的Model-View-Controller结构。在Android 中 Fragment和Activity通常上是控制器类(<a href="http://www.informit.com/articles/article.aspx?p=2126865).换句话说，他们是用户接口的部分，同样也是Views视图的部分。" target="_blank" rel="external">http://www.informit.com/articles/article.aspx?p=2126865).换句话说，他们是用户接口的部分，同样也是Views视图的部分。</a><br>正是因为如此，才很难严格的将fragments (或者 activities) 严格的划分成 控制器controlloers还是视图 views。最还是将它们放在自己单独的 fragments 包中。只要你遵循之前提到的建议，Activities 则可以放在顶级目录下。如果你规划有2到3个以上的activity，那么还是同样新建一个activities包吧。<br>然而，这种架构可以看做是另一种形式的MVC，包含要被解析API响应的JSON数据，来填充的POJO的models包中。和一个views包来包含你的自定义视图、通知、导航视图，widgets等等。适配器Adapter是在数据和视图之间。然而他们通常需要通过getView()方法来导出一些视图，所以你可以将adapters包放在views包里面。<br>一些控制器角色的类是应用程序级别的，同时是接近系统的。这些类放在managers包下面。一些繁杂的数据处理类，比如说”DateUtils”,放在utils包下面。与后端交互负责网络处理类，放在network包下面。</p>
<p>总而言之，以最接近用户而不是最接近后端去安排他们。<br>com.futurice.project<br>├─ network<br>├─ models<br>├─ managers<br>├─ utils<br>├─ fragments<br>└─ views<br>   ├─ adapters<br>   ├─ actionbar<br>   ├─ widgets<br>   └─ notifications</p>
<h2 id="资源文件命名"><a href="#资源文件命名" class="headerlink" title="资源文件命名"></a>资源文件命名</h2><p>遵循<code>前缀表明类型</code>的习惯，形如type_foo_bar.xml。例如：<code>fragment_contact_details.xml</code>,<br><code>view_primary_button.xml</code><br>,<code>activity_main.xml</code><br>.</p>
<h2 id="组织布局文件"><a href="#组织布局文件" class="headerlink" title="组织布局文件"></a>组织布局文件</h2><p>若果你不确定如何排版一个布局文件，遵循以下下规则可能会有帮助。</p>
<ul>
<li>每一个属性一行，缩进4个空格</li>
<li>android:id 总是作为第一个属性</li>
<li>android:layout_<em>**</em> 属性在上边</li>
<li>style 属性在底部</li>
<li>关闭标签/&gt;单独起一行，有助于调整和添加新的属性。</li>
</ul>
<p>例如：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></div><div class="line">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">    &gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/name"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_alignParentRight</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"@string/name"</span></div><div class="line">        <span class="attr">style</span>=<span class="string">"@style/FancyText"</span></div><div class="line">        /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">layout</span>=<span class="string">"@layout/reusable_part"</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="将一个大的style文件分割成多个文件"><a href="#将一个大的style文件分割成多个文件" class="headerlink" title="将一个大的style文件分割成多个文件"></a>将一个大的style文件分割成多个文件</h2><p>你可以有多个styles.xml 文件。Android SDK支持其它文件，styles这个文件名称并没有作用，起作用的是在文件里xml的style标签。因此你可以有多个style文件。styles.xml,style_home.xml,style_item_details.xml,styles_forms.xml。不用于资源文件路径需要为系统构建起的有意义，在res/values目录下的文件可以任意命名。</p>
<h2 id="关于colors-xml"><a href="#关于colors-xml" class="headerlink" title="关于colors.xml"></a>关于colors.xml</h2><p>colors.xml是一个调色板 在你的colors.xml文件中应该只是映射颜色的名称一个RGBA值，而没有其它的。不要使用它为不同的按钮来定义RGBA值。<br>不要这样做<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"button_foreground"</span>&gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"button_background"</span>&gt;</span>#2A91BD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_background_inactive"</span>&gt;</span>#5F5F5F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_background_active"</span>&gt;</span>#939393<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_foreground"</span>&gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_foreground_important"</span>&gt;</span>#FF9D2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    ...</div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"comment_shadow"</span>&gt;</span>#323232<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>使用这种格式，你会非常容易的开始重复定义RGBA值，这使如果需要改变基本色变的很复杂。同时，这些定义是跟一些环境关联起来的，如button或者comment,应该放到一个按钮风格中，而不是在color.xml文件中。</p>
<p>相反，这样做:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- grayscale --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"white"</span>     &gt;</span>#FFFFFF<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gray_light"</span>&gt;</span>#DBDBDB<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gray"</span>      &gt;</span>#939393<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"gray_dark"</span> &gt;</span>#5F5F5F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"black"</span>     &gt;</span>#323232<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- basic colors --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"green"</span>&gt;</span>#27D34D<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"blue"</span>&gt;</span>#2A91BD<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"orange"</span>&gt;</span>#FF9D2F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">color</span> <span class="attr">name</span>=<span class="string">"red"</span>&gt;</span>#FF432F<span class="tag">&lt;/<span class="name">color</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong>像这样规范的颜色很容易修改或重构，会使应用一共使用了多少种不同的颜色变得非常清晰。</strong></p>
<h2 id="小心关于WebViews的问题"><a href="#小心关于WebViews的问题" class="headerlink" title="小心关于WebViews的问题"></a>小心关于WebViews的问题</h2><p>如果你必须显示一个web视图，比如说对于一个新闻文章，避免做客户端处理HTML的工作，最好让后端工程师协助，让他返回一个 “纯” HTML。WebViews 也能导致内存泄露当保持引他们的Activity，而不是被绑定到ApplicationContext中的时候。当使用简单的文字或按钮时，避免使用WebView，这时使用TextView或Buttons更好。<br>// TODO 2016-3-2 2:57<br>参考文章：<a href="http://www.jianshu.com/p/4390f4fe19b3" target="_blank" rel="external">http://www.jianshu.com/p/4390f4fe19b3</a><br><a href="http://www.jianshu.com/p/d9e4ddd1c530" target="_blank" rel="external">http://www.jianshu.com/p/d9e4ddd1c530</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/在Activity中创建Handler发送消息以及接受消息过程浅析/" itemprop="url">
                  在Activity中创建Handler发送消息以及接受消息过程浅析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:23:21+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在Github上：<a href="https://github.com/caiqiqi/Notes/blob/master/%E5%9C%A8Activity%E4%B8%AD%E5%88%9B%E5%BB%BAHandler%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%E4%BB%A5%E5%8F%8A%E6%8E%A5%E5%8F%97%E6%B6%88%E6%81%AF%E8%BF%87%E7%A8%8B%E6%B5%85%E6%9E%90.md">https://github.com/caiqiqi/Notes/blob/master/%E5%9C%A8Activity%E4%B8%AD%E5%88%9B%E5%BB%BAHandler%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%E4%BB%A5%E5%8F%8A%E6%8E%A5%E5%8F%97%E6%B6%88%E6%81%AF%E8%BF%87%E7%A8%8B%E6%B5%85%E6%9E%90.md</a></p>
<p>ActivityThread::main() -&gt;<br>…<br>Looper.prepareMainLooper();<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepareMainLooper</span><span class="params">()</span> </span>&#123;</div><div class="line">        prepare(<span class="keyword">false</span>);    <span class="comment">// sThreadLocal.set(new Looper(quitAllowed));</span></div><div class="line">        <span class="keyword">synchronized</span> (Looper.class) &#123;</div><div class="line">            <span class="keyword">if</span> (sMainLooper != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"The main Looper has already been prepared."</span>);</div><div class="line">            &#125;</div><div class="line">            sMainLooper = myLooper();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">	</div><div class="line"><span class="comment">/**</span></div><div class="line">* Return the Looper object associated with the current thread.  Returns</div><div class="line">* null if the calling thread is not associated with a Looper.</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Looper <span class="title">myLooper</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> sThreadLocal.get();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="title">Looper</span><span class="params">(<span class="keyword">boolean</span> quitAllowed)</span></span>&#123;</div><div class="line">    mQueue = <span class="keyword">new</span> MessageQueue(quitAllowed);</div><div class="line">	mRun = <span class="keyword">true</span>;</div><div class="line">	mThread = Thread.currentThread();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>…</p>
<p>Looper最重要的一个方法是loop()方法，只有调用了loop后，消息循环系统才会真正地起作用。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span></span>&#123;</div><div class="line">    <span class="keyword">final</span> Looper me = myLooper();</div><div class="line">	<span class="keyword">if</span> (me == <span class="keyword">null</span>)&#123;</div><div class="line">	    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"No Loooper; Looper.prepare() wasn't called on this thread."</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">final</span> MessageQueue queue = me.mQueue;</div><div class="line">	...</div><div class="line">	<span class="keyword">for</span>(;;)&#123;</div><div class="line">	    Message msg = queue.next();    <span class="comment">//might block</span></div><div class="line">		<span class="comment">// No message indicates that the message queue is quitting.</span></div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	...</div><div class="line">	msg.target.dispatchMessage(msg);    <span class="comment">//这里的msg.target指的就是发送这条消息的Handler对象，这样Handler发送的消息最终又交给它的dispatchMessage方法来处理了。</span></div><div class="line">	<span class="comment">//但这里不同的是Handler的dispatchMessage()是在创建Handler时所使用的Looper的Looper.loop()方法中执行的，这样就成功将代码逻辑切换到指定的线程中去执行了。</span></div><div class="line">	...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>那Handler的dispatchMessage()是怎样的呢？<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Subclasses must implement this to receive messages.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Handle system messages here.</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dispatchMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (msg.callback != <span class="keyword">null</span>) &#123;</div><div class="line">        handleCallback(msg);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">if</span> (mCallback != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (mCallback.handleMessage(msg)) &#123;</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        handleMessage(msg);    <span class="comment">//即最终还是调动handlerMessage()来处理接收到的消息，不过这个方法得创建Handler时由程序员自己复写。</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当在Activity中<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> Handler handler = <span class="keyword">new</span> Handler();</div></pre></td></tr></table></figure></p>
<p>时，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">()</span></span>&#123;</div><div class="line">    ...</div><div class="line">	mLooper = Looper.myLooper();    <span class="comment">//取出由ActivityThread类的main()中prepare(false)之后存储在sThreadLocal中的mLooper对象，然后赋值给Handler对象的mLooper，即，拿到与主线程关联的Looper对象</span></div><div class="line">	mQueue = mLooper.mQueue;    <span class="comment">//将mLooper中的mQueue(MessageQueue)对象赋值给Handler对象的mQueue，之后Handler就可以把发送的消息存储在这个MessageQueue之中</span></div><div class="line">	mCallback = <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在Activity中调用handler对象的<br><code>handler.sendMessage(...)</code>;<br>最终调用的是：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">sendMessageAtTime</span><span class="params">(Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>&#123;</div><div class="line">       MessageQueue queue = mQueue;</div><div class="line">       <span class="keyword">if</span> (queue == <span class="keyword">null</span>) &#123;</div><div class="line">           RuntimeException e = <span class="keyword">new</span> RuntimeException(</div><div class="line">                   <span class="keyword">this</span> + <span class="string">" sendMessageAtTime() called with no mQueue"</span>);</div><div class="line">           Log.w(<span class="string">"Looper"</span>, e.getMessage(), e);</div><div class="line">           <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> enqueueMessage(queue, msg, uptimeMillis);</div><div class="line">   &#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">enqueueMessage</span><span class="params">(MessageQueue queue, Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>&#123;</div><div class="line">       msg.target = <span class="keyword">this</span>;    <span class="comment">//也就是说，这个消息是发送给Handler这个对象自己的！！！</span></div><div class="line">       <span class="keyword">if</span> (mAsynchronous) &#123;</div><div class="line">           msg.setAsynchronous(<span class="keyword">true</span>);</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">return</span> queue.enqueueMessage(msg, uptimeMillis);    <span class="comment">//作用就是往消息队列中插入一条消息(单链表的插入操作)</span></div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/11/研究生管理系统前端代码和HTTP通信过程/" itemprop="url">
                  研究生管理系统前端代码和HTTP通信过程分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-11T03:20:12+08:00" content="2016-07-11">
              2016-07-11
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##主页面<br><a href="http://gs.cqupt.edu.cn:8080/Gstudent/Default.aspx" target="_blank" rel="external">http://gs.cqupt.edu.cn:8080/Gstudent/Default.aspx</a><br><img src="http://img.blog.csdn.net/20160309165759223" alt="这里写图片描述"></p>
<h3 id="在浏览器中输入…Default-aspx之后"><a href="#在浏览器中输入…Default-aspx之后" class="headerlink" title="在浏览器中输入…Default.aspx之后"></a>在浏览器中输入…Default.aspx之后</h3><p>从Chrome的调试工具中可以看到，先加载default.aspx，然后如果之前有缓存过的js,css,图片等资源时，就从缓存中读取这些缓存的资源，<br><img src="http://img.blog.csdn.net/20160312114722380" alt="这里写图片描述"><br>注意Referer都是 <a href="http://gs.cqupt.edu.cn:8080/gstudent/default.aspx" target="_blank" rel="external">http://gs.cqupt.edu.cn:8080/gstudent/default.aspx</a><br><img src="http://img.blog.csdn.net/20160312115014585" alt="这里写图片描述"></p>
<p>##登录页面<br><a href="http://gs.cqupt.edu.cn:8080/Gstudent/Relogin.aspx" target="_blank" rel="external">http://gs.cqupt.edu.cn:8080/Gstudent/Relogin.aspx</a><br>或者<br><a href="http://gs.cqupt.edu.cn:8080/gstudent/ReLogin.aspx?ReturnUrl=/Gstudent/loging.aspx" target="_blank" rel="external">http://gs.cqupt.edu.cn:8080/gstudent/ReLogin.aspx?ReturnUrl=/Gstudent/loging.aspx</a><br><img src="http://img.blog.csdn.net/20160309165927895" alt="这里写图片描述"></p>
<p>发现在：<br><br>第一次载入<code>Relogin.aspx</code>页面的时候，request里面是<strong>没有sessionId的</strong>。而在response里Set-Cookie里面设置里cookie的SeesionId字段。<br><br><img src="http://img.blog.csdn.net/20160311212300107" alt="这里写图片描述"><br>然后在<br><br>第二次请求的时候，request中的cookie会带上这个SeesionId字段，保存着之前的SessionId值<br><br><img src="http://img.blog.csdn.net/20160311212150871" alt="这里写图片描述"><br>由此想到可以请求一次（带上随便的几个参数然后post上去就得意获取最新生成的SessionId）</p>
<h2 id="退出按钮"><a href="#退出按钮" class="headerlink" title="退出按钮"></a>退出按钮</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a id=&quot;DataList1_ctl05_hykMenu&quot; class=&quot;none&quot; onclick=&quot;if(confirm(&apos;确定要退出系统吗?&apos;))&#123;parent.location.href =&apos;../UserLogin.aspx?exit=1&apos;&#125;&quot; href=&quot;javascript:void(0)&quot;&gt;退出&lt;/a&gt;</div></pre></td></tr></table></figure>
<h2 id="课程查询页面"><a href="#课程查询页面" class="headerlink" title="课程查询页面"></a>课程查询页面</h2><p><code>gs.cqupt.edu.cn:8080/Gstudent/Course/CourseSelFull.aspx</code><br>先找<code>登录</code>按钮<br>登录按钮对应的<code>span</code>标签：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"ctl00_contentParent_UpdatePanel2"</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"l-btn"</span> <span class="attr">id</span>=<span class="string">"btLogin"</span> <span class="attr">tabindex</span>=<span class="string">"4"</span> <span class="attr">title</span>=<span class="string">"登录系统"</span> <span class="attr">href</span>=<span class="string">'javascript:WebForm_DoPostBackWithOptions(new%20WebForm_PostBackOptions("ctl00$contentParent$btLogin",%20"",%20true,%20"",%20"",%20false,%20true))'</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"l-btn-left"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"l-btn-text"</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>即，其id为<code>btLogin</code><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"Form1"</span> <span class="attr">name</span>=<span class="string">"Form1"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"./ReLogin.aspx"</span> </span></div><div class="line">    <span class="attr">onsubmit</span>=<span class="string">"javascript:return WebForm_OnSubmit();"</span> </div><div class="line">    <span class="attr">onkeypress</span>=<span class="string">"javascript:return WebForm_FireDefaultButton(event, 'btLogin')"</span>&gt;</div></pre></td></tr></table></figure></p>
<p>关于<code>WebForm_OnSubmit</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">//&lt;![CDATA[</div><div class="line">function WebForm_OnSubmit() &#123;</div><div class="line">if (typeof(ValidatorOnSubmit) == &quot;function&quot; &amp;&amp; ValidatorOnSubmit() == false) return false;</div><div class="line">return true;</div><div class="line">&#125;</div><div class="line">//]]&gt;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line">function ValidatorOnSubmit() &#123;</div><div class="line">    if (Page_ValidationActive) &#123;</div><div class="line">        return ValidatorCommonOnSubmit();</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        return true;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>请求到时候会包含这几个脚本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;/WebResource.axd?d=5d5KGRMAyLvBqg6D0Z6Xhj3Bik0iH8Qt5h7ZqLwbqRWMcG_QNGx9uHHYTzhIEQhPxWH_P8u88WPt72kX0&amp;amp;t=635793306349294682&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;script src=&quot;/ScriptResource.axd?d=AckwrukOP9WZOQlm3XXq4YcrzYbdSQ2KhWkywbSm1aGoDT_FKtbRYITwBp3NhSjhrizBahjqDw84LDkin5GAuA35K9SQhCDJ08MfQmfH_dkIfL6Ri2ppB1doY17oRpPfe_KiLMv-Dc3ioc5o0&amp;amp;t=fffffffffa488f4d&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&quot;/ScriptResource.axd?d=a8XuVJe3RPmNNezBCV4fnhmFCTQPZUJuIVB1PICLRIFB0h0iFOT51is_Q9pzVzBg5YWBLBKS1CWtbSPylPaRTjWmvnSuN_4Vp_BgSDtPqcL64afEn05pWbSSNySR9Mydpi-0VtLHKkLXQpp5CBE1Sm7fImxVdYLGKHFTJg2&amp;amp;t=72e85ccd&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="xml"></span></div><div class="line">//&lt;![CDATA[</div><div class="line">var theForm = document.forms['Form1'];</div><div class="line">if (!theForm) &#123;</div><div class="line">    theForm = document.Form1;</div><div class="line">&#125;</div><div class="line">//前台调用后台aspx的代码</div><div class="line">function __doPostBack(eventTarget, eventArgument) &#123;</div><div class="line">    if (!theForm.onsubmit || (theForm.onsubmit() != false)) &#123;</div><div class="line">        theForm.__EVENTTARGET.value = eventTarget;</div><div class="line">        theForm.__EVENTARGUMENT.value = eventArgument;</div><div class="line">        theForm.submit();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">//]]&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>注：<code>document.forms[&#39;formname&#39;]</code>得到以<code>formname</code>为名的表单<br>initForm()函数定义：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--initForm() 函数定义--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></div><div class="line">        function initForm() &#123;</div><div class="line">            $('#btLogin').linkbutton();</div><div class="line">        &#125;      </div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>注：<code>$(&#39;#btlogin&#39;)</code>的意思是通过jQuery找到 id 为<code>btLogin</code>的元素。然后<code>.linkbutton()</code>这里是使用了<img src="http://www.jeasyui.com/documentation/linkbutton.php" alt="EasyUI">这个框架的API。其作用是创建一个超链接按钮，表示普通的a标签。按钮可为图标＋文本或图标或文本。宽度可修改。关于<code>$(&quot;#btn&quot;).linkbutton()</code>的作用，详见<img src="http://www.cnblogs.com/haogj/archive/2013/05/13/3074461.html" alt="这篇文章"><br>即，可以把那个按钮变成特殊的效果，和加上<code>class ＝ easyui-linkbutton</code> 的作用是一样的。<br>Create a linkbutton from markup is more easily. </p>
<p><code>&lt;a id=&quot;btn&quot; href=&quot;#&quot; class=&quot;easyui-linkbutton&quot; data-options=&quot;iconCls:&#39;icon-search&#39;&quot;&gt;easyui&lt;/a&gt;</code><br>Create a linkbutton programmatically is also allowed. </p>
<p>如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a id=&quot;btn&quot; href=&quot;#&quot;&gt;easyui&lt;/a&gt;</div></pre></td></tr></table></figure>
<p>然后：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(&apos;#btn&apos;).linkbutton(&#123;</div><div class="line">    iconCls: &apos;icon-search&apos;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined">      </span></div><div class="line">         $(document).ready(function () &#123;if(typeof (initForm)=="function")&#123; initForm()&#125;&#125;)</div><div class="line">         $(document).ready(function () &#123; if (typeof (reload) == "function") &#123; reload() &#125; &#125;)   </div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>注：</p>
<ul>
<li>js中<code>typeof</code> 可以用来检测给定变量的数据类型。</li>
<li><code>$(document).ready(function(){...})</code> 表示页面加载之后开始运行。</li>
</ul>
<p>从上面可以看出，过程如下：<br>页面加载之后，执行<code>initForm()</code>,然后是<code>reload()</code></p>
<p>关于几个隐藏的 input<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">&lt;input name=&quot;__EVENTTARGET&quot; id=&quot;__EVENTTARGET&quot; value=&quot;&quot; type=&quot;hidden&quot;&gt;</div><div class="line">&lt;input name=&quot;__EVENTARGUMENT&quot; id=&quot;__EVENTARGUMENT&quot; value=&quot;&quot; type=&quot;hidden&quot;&gt;</div><div class="line">&lt;input name=&quot;__VIEWSTATE&quot; id=&quot;__VIEWSTATE&quot; value=&quot;/wEPDwUKMTA4ODc5NDc0OA9kFgJmD2QWAgIDD2QWAgIDD2QWAgILD2QWAmYPZBYCAgEPDxYCHghJbWFnZVVybAUrfi9QdWJsaWMvVmFsaWRhdGVDb2RlLmFzcHg/aW1hZ2U9MTEyNjY2NzY2OGRkGAEFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYBBSFjdGwwMCRjb250ZW50UGFyZW50JFZhbGlkYXRlSW1hZ2U=&quot; type=&quot;hidden&quot;&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>等前面都加载完之后，再在script里面加载三个aspx页面。<br><img src="http://img.blog.csdn.net/20160313230126150" alt="这里写图片描述"><br>于是有了后面的三个请求，然而这里的<code>uid</code>未被赋值，所以几个请求都是<code>.aspx?undefined</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Cai Qiqi" />
          <p class="site-author-name" itemprop="name">Cai Qiqi</p>
          <p class="site-description motion-element" itemprop="description">陛下，您真是一位老太太</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">26</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">22</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://caiqiqi.github.io" target="_blank" title="Homepage">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Homepage
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/2963784630" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/caiqiqi" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cai Qiqi</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
