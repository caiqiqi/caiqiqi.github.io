---
title: 再玩树莓派
date: 2016-07-11 02:13:11
tags: [linux, 树莓派]
---

好久没玩树莓派了，想用一下kali，于是想起了树莓派。昨天晚上就那么任性地想立马开启树莓派，但是当时只有一根网线，然后这个Mac总是不能直接通过网线连接树莓派。Mac ping不通树莓派。而且用网线连上树莓派之后大概一分钟之内会产生一个172.18.124.1的默认网关，然而arp不到它的物理地址。按照网上的各种方法删默认路由又添加依然没有用。我觉得我缺一根网线，于是今天去买了一根两米的网线，然后把Mac和树莓派作为两个LAN口连上路由器。不知道是不是没有设置DHCP的原因，树莓派一直得不到IP，然后我的Mac是设置的静态IP。好啦，不知道了，反正最后我把进宿舍的网线接到路由器的WAN口，然后就可以在浏览器访问路由器的192.168.0.1了。然后在DHCP客户端那一栏找到了我的树莓派的IP，是192.168.0.5。然后终于可以ssh到树莓派了，开始不知道是忘记了密码，还是输错了一直提示密码错误，后来费了老大劲终于找到了密码，原来还是那个密码并没有变。
![这里写图片描述](http://img.blog.csdn.net/20160419141515306)</br>
好啦，终于连上了，庆祝一下!
![这里写图片描述](http://img.blog.csdn.net/20160419141535976)</br>
然后用网线连上的Mac，但是树莓派不能上网啊，于是找到之前买的无线网卡，插在树莓派上。但是每次插的时候，只是开始亮了一会儿灯，然后就灭了，但是`ifconfig -a` 还是可以找到wlan0，说明树莓派是识别了这个网卡的。然后我看了一下网上的博客，说是在编辑好`sudo vi /etc/network/interfaces`之后，要重启一下，然后树莓派就可以根据你配置的热点的SSID和加密方式和密码去连那个热点了。OK，大功告成了，现在我的树莓派有两个IP了(分别对应着两个网卡)
![这里写图片描述](http://img.blog.csdn.net/20160419142620959)</br>
然后我通过两个网卡都ping一下树莓派，发现无线网的延迟和有线的延迟不是一个数量级的。。</br>
![这里写图片描述](http://img.blog.csdn.net/20160419142805922)</br>
然后就是解决树莓派怎么上网了。虽然现在树莓派连上了我的Windows发出的热点，但是没有设置默认网关(它就不会自己找么)。好啦，那我自己来设置默认网关吧。
`route add default gw 192.168.23.1`</br>
Linux下有`gw`，而OSX平台是直接`route add default 192.168.23.1`没有`gw`。这是它们的区别。
果然一添加默认路由就可以上网了！
![这里写图片描述](http://img.blog.csdn.net/20160419145757876)</br>
哈哈，终于可以上网了好激动，马上`apt-get update`一下。
这里我可是用的两个网卡分别ssh到树莓派哦~</br>
![这里写图片描述](http://img.blog.csdn.net/20160419163337598)
准备用一下`metasploit`结果发现metasploit和postgresql都没有装，于是`apt-get install postgresql metasploit-framework`一下，结果发现从墙内的IP访问`http.kali.org`时真的是龟速啊，好歹我是4M带宽诶，你就给30k/s给我下载，索性直接ss全局模式了，然后基本满速两分钟就搞定了。因为我的树莓派上并没有装ss，我是用的我的Mac下载的metasploit，于是我得把这个下载的文件传到树莓派上，得用`scp`这个命令。
开始我是在树莓派的终端里用`root@kali:~# scp 192.168.0.6:/Users/caiqiqi/Downloads/metasploit-framework_4.11.5-2016010401-0kali1~r1u1_armhf.deb /root`</br>
结果呢？
![这里写图片描述](http://img.blog.csdn.net/20160419162748856)</br>
这是因为我的Mac没有开启ssh服务。
于是我在本机Mac的终端里用
`scp /Users/caiqiqi/Downloads/metasploit-framework_4.11.5-2016010401-0kali1~r1u1_armhf.deb root@192.168.0.5:/root/` </br>
OK！搞定了，速度超快，基本就是局域网的理论带宽了。
![这里写图片描述](http://img.blog.csdn.net/20160419163405146)</br>
OK，通过`msfconsole`进入到metasploit的console了！
![这里写图片描述](http://img.blog.csdn.net/20160419170130744)


